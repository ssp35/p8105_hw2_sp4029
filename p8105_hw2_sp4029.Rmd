---
title: "Homework 2"
author: "Saryu Patel"
date: "10/4/2021"
output: github_document
---

```{r setup, message=FALSE}
library(tidyverse)
library(readxl)
```

### Problem 1

```{r}
trash_df <- 
  read_excel("data/Trash-Wheel-Collection-Totals-7-2020-2.xlsx", range = "A2:N408") %>% 
  janitor::clean_names() %>% 
  drop_na() %>% 
  mutate(sports_balls = round(sports_balls))
```

```{r}
precip_18 <- 
  read_excel("data/Trash-Wheel-Collection-Totals-7-2020-2.xlsx", sheet = 7, range = "A2:B14") %>% 
  janitor::clean_names() %>% 
  mutate(year = 2018)

precip_19 <- 
  read_excel("data/Trash-Wheel-Collection-Totals-7-2020-2.xlsx", sheet = 6, range = "A2:B14") %>% 
  janitor::clean_names() %>% 
  mutate(year = 2019)

precip_df <- 
  bind_rows(precip_18, precip_19) %>% 
  mutate(month = month.name[month])
```

#### Mr. Trash Wheel Dataset

There are `r nrow(trash_df)` observations and `r ncol(trash_df)` variables in the Mr. Trash Wheel dataset. Some key variables in this dataset include the weight of the trash in each dumpster in tons and the volume of the trash in cubic yards. The median number of sports balls in a dumpster in 2019 was `r trash_df %>% filter(year == 2019) %>% summarize(median(sports_balls))`.

#### Precipitation Dataset

There are `r nrow(precip_df)` observations and `r ncol(precip_df)` variables in the resulting precipitation dataset. The key variable in this dataset is the total amount of precipitation each month. The total precipitation in 2018 was `r precip_df %>% filter(year == 2018) %>% summarize(sum(total))` inches, while the total precipitation in 2019 from January through June was `r precip_df %>% filter(year == 2019) %>% summarize(sum(total))` inches.


### Problem 2

Politicians Dataset

```{r}
pols_df <- 
  read_csv("data/fivethirtyeight_datasets/pols-month.csv") %>% 
  separate(mon, into = c("year", "month", "day")) %>% 
  mutate(month = month.abb[as.numeric(month)],
         president = recode(prez_dem, `1` = "dem", `0` = "gop")) %>% 
  select(-c(day, prez_gop, prez_dem))
```

S&P Stock Dataset

```{r}
snp_df <- read_csv("data/fivethirtyeight_datasets/snp.csv")

dates <- snp_df$date %>% as.Date(., "%m/%d/%y")
dates <- as.Date(ifelse(dates > Sys.Date(), format(dates, "19%y-%m-%d"), format(dates)))
snp_df$date = dates

snp_df <- snp_df %>% 
  separate(date, into = c("year", "month", "day")) %>% 
  mutate(month = month.abb[as.numeric(month)]) %>% 
  select(-day)
```

Unemployment Dataset

```{r}
unemp_df <- 
  read_csv("data/fivethirtyeight_datasets/unemployment.csv") %>% 
  pivot_longer(
    Jan:Dec,
    names_to = "month",
    values_to = "unemp_rate"
  ) %>% 
  janitor::clean_names()

unemp_df$year <- as.character(unemp_df$year)
```

Merge

```{r}
final_df <- 
  pols_df %>% 
  left_join(snp_df, by = c("year", "month")) %>% 
  left_join(unemp_df, by = c("year", "month"))
```


Write a short paragraph about these datasets. Explain briefly what each dataset contained, and describe the resulting dataset (e.g. give the dimension, range of years, and names of key variables).


### Problem 3